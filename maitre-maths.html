<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma√Ætre des Maths - D√©fi Expert CM1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .correct-anim { animation: pulseGreen 0.5s ease-in-out; }
        @keyframes pulseGreen {
            0% { background-color: white; }
            50% { background-color: #dcfce7; }
            100% { background-color: #f0fdf4; }
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: #fff;
            border: 3px solid #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s, background-color 0.2s;
            z-index: 1000;
        }

        .home-btn:hover {
            transform: scale(1.1);
            background-color: #f0f0f0;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                home: <><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></>,
                hash: <><line x1="4" y1="9" x2="20" y2="9"/><line x1="4" y1="15" x2="20" y2="15"/><line x1="10" y1="3" x2="8" y2="21"/><line x1="16" y1="3" x2="14" y2="21"/></>,
                activity: <><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></>,
                pie: <><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></>,
                box: <><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></>,
                ruler: <><path d="m19.14 12.94-6.2-6.2"/><path d="M7.14 12.94 12.03 8.05"/><path d="M21 3.1a2 2 0 0 0-2.83 0L3.1 18.17a2 2 0 0 0 0 2.83l2.83 2.83a2 2 0 0 0 2.83 0L23.83 8.76a2 2 0 0 0 0-2.83l-2.83-2.83Z"/><path d="m9.14 10.94-2.83-2.83"/><path d="m14.14 15.94-2.83-2.83"/><path d="m16.14 8.94-2.83-2.83"/></>,
                target: <><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></>,
                "check-circle": <><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>,
                "x-circle": <><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></>,
                "book-open": <><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>,
                "chevron-right": <polyline points="9 18 15 12 9 6"/>,
                trophy: <><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></>,
                "refresh-cw": <><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/></>
            };

            return (
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const COLOR_MAP = {
            indigo: { bg: 'bg-indigo-500', light: 'bg-indigo-100', text: 'text-indigo-600' },
            amber: { bg: 'bg-amber-500', light: 'bg-amber-100', text: 'text-amber-600' },
            red: { bg: 'bg-red-500', light: 'bg-red-100', text: 'text-red-600' },
            emerald: { bg: 'bg-emerald-500', light: 'bg-emerald-100', text: 'text-emerald-600' },
            purple: { bg: 'bg-purple-500', light: 'bg-purple-100', text: 'text-purple-600' },
            slate: { bg: 'bg-slate-500', light: 'bg-slate-100', text: 'text-slate-600' }
        };

        const QUIZ_DATA = {
            nombres: {
                id: 'nombres', title: "Nombres & Millions", color: "indigo", icon: "hash",
                questions: [
                    { q: "Comment √©crit-on : deux millions trois mille quarante ?", options: ["2 300 040", "2 003 040", "2 030 400", "2 003 400"], good: 1, info: "Attention aux rangs vides ! Il y a 0 centaine de mille et 0 dizaine de mille." },
                    { q: "Quel est le chiffre des dizaines de mille dans 8 456 123 ?", options: ["4", "5", "6", "8"], good: 1, info: "3 est le chiffre des unit√©s, 2 des dizaines, 1 des centaines, 6 des unit√©s de mille, 5 des dizaines de mille." },
                    { q: "D√©compose : (4 x 100 000) + (8 x 1 000) + 7", options: ["408 007", "480 007", "400 807", "48 007"], good: 0, info: "400 000 + 8 000 + 7 = 408 007." },
                    { q: "Quel nombre est juste avant 1 000 000 ?", options: ["999 900", "999 000", "999 999", "900 000"], good: 2, info: "C'est le plus grand nombre de 6 chiffres." },
                    { q: "Combien y a-t-il de dizaines de mille dans 150 000 ?", options: ["1", "5", "15", "150"], good: 2, info: "On regarde le nombre form√© jusqu'au rang des dizaines de mille." },
                    { q: "Compare : 4 508 100 ... 4 580 000", options: [">", "<", "=", "‚âà"], good: 1, info: "On compare chiffre par chiffre : 0 dizaine de mille est plus petit que 8." },
                    { q: "Encadre 2 456 789 √† la dizaine de mille pr√®s :", options: ["2 450 000 < ... < 2 460 000", "2 400 000 < ... < 2 500 000", "2 456 000 < ... < 2 457 000", "2 456 700 < ... < 2 456 800"], good: 0, info: "On garde les chiffres jusqu'aux dizaines de mille (45) et on compl√®te avec des z√©ros." },
                    { q: "Quel est le nombre de centaines dans 12 345 ?", options: ["3", "12", "123", "345"], good: 2, info: "Il y a 123 centaines enti√®res dans 12 345." },
                    { q: "Ajoute 1 dizaine de mille √† 995 000 :", options: ["996 000", "1 005 000", "905 000", "1 095 000"], good: 1, info: "99 dizaines de mille + 1 dizaine de mille = 100 dizaines de mille (1 million) + les 5000 restants." },
                    { q: "√âcris 705 020 en lettres :", options: ["Sept-cent-cinq-mille-vingt", "Sept-cent-mille-cinq-cent-vingt", "Soixante-quinze-mille-vingt", "Sept-millions-cinq-mille-vingt"], good: 0, info: "Le 's' de cents saute car il est suivi de 'cinq'." }
                ]
            },
            calcul: {
                id: 'calcul', title: "Calcul & Op√©rations", color: "amber", icon: "activity",
                questions: [
                    { q: "Quel est le r√©sultat de 45 x 11 ?", options: ["450", "495", "545", "405"], good: 1, info: "Astuce : 45 x 10 = 450. 450 + 45 = 495." },
                    { q: "Trouve le quotient et le reste de 47 √∑ 5 :", options: ["q=8, r=7", "q=9, r=2", "q=7, r=12", "q=9, r=5"], good: 1, info: "5 x 9 = 45. 47 - 45 = 2. Le reste est toujours plus petit que le diviseur." },
                    { q: "Calcule 125 x 8 :", options: ["800", "900", "1 000", "1 200"], good: 2, info: "8 x 100 = 800 et 8 x 25 = 200. 800 + 200 = 1000." },
                    { q: "Dans une division, si le diviseur est 6, quel est le reste maximal ?", options: ["6", "7", "5", "0"], good: 2, info: "Le reste doit √™tre strictement inf√©rieur au diviseur." },
                    { q: "Calcule le triple de 150 :", options: ["300", "450", "600", "45"], good: 1, info: "Le triple signifie multiplier par 3. 150 + 150 + 150 = 450." },
                    { q: "Quel est le double de la moiti√© de 80 ?", options: ["20", "40", "80", "160"], good: 2, info: "La moiti√© de 80 est 40. Le double de 40 est 80. On revient au point de d√©part !" },
                    { q: "Combien font 14 x 20 ?", options: ["28", "240", "280", "140"], good: 2, info: "14 x 2 = 28, puis on ajoute le z√©ro." },
                    { q: "Si 8 x 7 = 56, combien font 80 x 70 ?", options: ["560", "5 600", "56 000", "56"], good: 1, info: "On ajoute les deux z√©ros des deux facteurs : 5 600." },
                    { q: "Trouve le r√©sultat de 1 500 √∑ 50 :", options: ["3", "30", "300", "15"], good: 1, info: "On peut barrer un z√©ro : 150 √∑ 5 = 30." },
                    { q: "Calcule 4 x 7 x 25 :", options: ["700", "1 000", "250", "70"], good: 0, info: "Astuce : regroupe 4 x 25 = 100. Puis 100 x 7 = 700." }
                ]
            },
            fractions: {
                id: 'fractions', title: "Fractions & D√©cimaux", color: "red", icon: "pie",
                questions: [
                    { q: "Quelle fraction est √©gale √† 1,5 ?", options: ["1/5", "15/10", "1/2", "15/100"], good: 1, info: "1,5 c'est une unit√© et cinq dixi√®mes, soit 15 dixi√®mes." },
                    { q: "Si je partage une pizza en 8 et que j'en mange 3 parts, il reste :", options: ["3/8", "5/8", "8/3", "1/2"], good: 1, info: "8/8 - 3/8 = 5/8." },
                    { q: "Quelle fraction est sup√©rieure √† 1 ?", options: ["1/2", "3/4", "5/4", "9/10"], good: 2, info: "Une fraction est > 1 si son num√©rateur est plus grand que son d√©nominateur." },
                    { q: "Calcule 3/10 + 40/100 :", options: ["43/100", "70/100", "7/100", "43/10"], good: 1, info: "3/10 = 30/100. Donc 30/100 + 40/100 = 70/100 (ou 7/10)." },
                    { q: "Comment s'√©crit 7/100 en nombre d√©cimal ?", options: ["0,7", "0,07", "7,00", "0,007"], good: 1, info: "C'est 7 centi√®mes, donc le 7 est au 2e rang apr√®s la virgule." },
                    { q: "Dans 14,25 quel est le chiffre des dixi√®mes ?", options: ["1", "4", "2", "5"], good: 2, info: "Le premier chiffre apr√®s la virgule est celui des dixi√®mes." },
                    { q: "Trouve le nombre entier le plus proche de 9,87 :", options: ["8", "9", "10", "11"], good: 2, info: "9,87 est presque √©gal √† 10." },
                    { q: "Quelle est la moiti√© de 0,50 ?", options: ["0,25", "0,5", "1", "0,10"], good: 0, info: "C'est comme la moiti√© de 50 centimes : 25 centimes." },
                    { q: "Compare : 12,5 ... 12,05", options: [">", "<", "=", "‚âà"], good: 0, info: "12,50 est plus grand que 12,05." },
                    { q: "Somme de 2 + 3/10 + 5/100 :", options: ["2,35", "235", "2,305", "25,3"], good: 0, info: "Chaque fraction donne un rang apr√®s la virgule : 2,35." }
                ]
            },
            geometrie: {
                id: 'geometrie', title: "G√©om√©trie & Espace", color: "emerald", icon: "box",
                questions: [
                    { q: "Comment appelle-t-on deux droites qui ne se croisent jamais ?", options: ["S√©cantes", "Perpendiculaires", "Parall√®les", "Horizontales"], good: 2, info: "L'√©cart entre elles reste toujours le m√™me." },
                    { q: "Quel polygone a 4 c√¥t√©s √©gaux et 4 angles droits ?", options: ["Le rectangle", "Le losange", "Le carr√©", "Le parall√©logramme"], good: 2, info: "Le carr√© est un rectangle ET un losange √† la fois." },
                    { q: "Combien de sommets poss√®de un cube ?", options: ["4", "6", "8", "12"], good: 2, info: "Un cube a 8 sommets, 6 faces et 12 ar√™tes." },
                    { q: "Un triangle qui a un angle droit est un triangle...", options: ["Isoc√®le", "√âquilat√©ral", "Rectangle", "Quelconque"], good: 2, info: "On utilise souvent l'√©querre pour le v√©rifier." },
                    { q: "Comment s'appelle le segment qui relie le centre d'un cercle √† son bord ?", options: ["Le diam√®tre", "Le rayon", "La corde", "Le p√©rim√®tre"], good: 1, info: "Le diam√®tre est √©gal √† deux rayons." },
                    { q: "Quelle figure n'est pas un polygone ?", options: ["Un triangle", "Un cercle", "Un pentagone", "Un hexagone"], good: 1, info: "Un polygone est form√© uniquement de segments de droites." },
                    { q: "Un angle plus petit qu'un angle droit est un angle...", options: ["Aigu", "Obtus", "Plat", "Droit"], good: 0, info: "Aigu comme une pointe fine." },
                    { q: "Combien d'axes de sym√©trie poss√®de un carr√© ?", options: ["2", "4", "8", "0"], good: 1, info: "2 diagonales et 2 m√©diatrices des c√¥t√©s." },
                    { q: "Quelle est la nature d'un triangle avec 3 c√¥t√©s √©gaux ?", options: ["Isoc√®le", "Rectangle", "√âquilat√©ral", "Scal√®ne"], good: 2, info: "'√âqui' veut dire √©gal, 'lat√©ral' veut dire c√¥t√©." },
                    { q: "Comment appelle-t-on la face du bas d'une pyramide ?", options: ["Le sommet", "L'ar√™te", "La base", "Le patron"], good: 2, info: "C'est sur cette face que repose le solide." }
                ]
            },
            mesures: {
                id: 'mesures', title: "Mesures & Grandeurs", color: "purple", icon: "ruler",
                questions: [
                    { q: "Combien de grammes y a-t-il dans 2,5 kg ?", options: ["25 g", "250 g", "2 500 g", "25 000 g"], good: 2, info: "1 kg = 1 000 g. 2,5 x 1 000 = 2 500." },
                    { q: "L'aire d'un carr√© de 5 cm de c√¥t√© est :", options: ["20 cm", "20 cm¬≤", "25 cm", "25 cm¬≤"], good: 3, info: "Aire = C√¥t√© x C√¥t√©. 5 x 5 = 25. L'unit√© est le carr√© (cm¬≤)." },
                    { q: "Convertis 1h 15min en minutes :", options: ["75 min", "115 min", "60 min", "100 min"], good: 0, info: "60 + 15 = 75 minutes." },
                    { q: "Quel est le p√©rim√®tre d'un rectangle de 6m sur 4m ?", options: ["10 m", "20 m", "24 m", "24 m¬≤"], good: 1, info: "P√©rim√®tre = (L + l) x 2. (6 + 4) x 2 = 20 m." },
                    { q: "Combien de cl dans 1 litre ?", options: ["10 cl", "100 cl", "1 000 cl", "0,1 cl"], good: 1, info: "Centilitre veut dire 'centi√®me de litre'." },
                    { q: "Quelle unit√© choisit-on pour mesurer l'√©paisseur d'un cahier ?", options: ["Le m√®tre", "Le centim√®tre", "Le millim√®tre", "Le kilom√®tre"], good: 2, info: "Le millim√®tre est adapt√© aux tr√®s petites longueurs." },
                    { q: "Une bouteille de 1,5L peut remplir combien de verres de 25cl ?", options: ["4", "6", "10", "15"], good: 1, info: "1,5L = 150cl. 150 / 25 = 6 verres." },
                    { q: "Combien de secondes dans 2 minutes et demi ?", options: ["120 s", "150 s", "250 s", "180 s"], good: 1, info: "60 + 60 + 30 = 150 secondes." },
                    { q: "Un terrain fait 1 km de p√©rim√®tre. J'en fais 3 tours, j'ai parcouru :", options: ["300 m", "3 000 m", "30 000 m", "3 km¬≤"], good: 1, info: "3 tours = 3 km = 3 000 m√®tres." },
                    { q: "Le p√©rim√®tre d'un triangle √©quilat√©ral de 7 cm de c√¥t√© est :", options: ["14 cm", "21 cm", "28 cm", "49 cm"], good: 1, info: "7 + 7 + 7 = 21 cm." }
                ]
            },
            problemes: {
                id: 'problemes', title: "Logique & Probl√®mes", color: "slate", icon: "target",
                questions: [
                    { q: "3 stylos co√ªtent 6‚Ç¨. Combien co√ªtent 12 stylos ?", options: ["12‚Ç¨", "18‚Ç¨", "24‚Ç¨", "30‚Ç¨"], good: 2, info: "Il y a 4 fois plus de stylos (3 x 4 = 12), donc le prix est multipli√© par 4 (6 x 4 = 24)." },
                    { q: "Un train part √† 14h30 et arrive √† 16h15. Dur√©e du trajet ?", options: ["1h15", "1h45", "2h15", "1h30"], good: 1, info: "De 14h30 √† 15h30 (1h) + 45 min pour arriver √† 16h15." },
                    { q: "J'ai 50‚Ç¨. J'ach√®te 3 livres √† 12‚Ç¨. Combien me reste-t-il ?", options: ["36‚Ç¨", "24‚Ç¨", "14‚Ç¨", "12‚Ç¨"], good: 2, info: "3 x 12 = 36. 50 - 36 = 14‚Ç¨." },
                    { q: "Dans une classe de 24 √©l√®ves, il y a 1/3 de gauchers. Combien ?", options: ["3", "8", "12", "6"], good: 1, info: "24 divis√© par 3 = 8." },
                    { q: "Une recette pour 4 personnes demande 200g de farine. Pour 10 personnes ?", options: ["400g", "500g", "600g", "1kg"], good: 1, info: "Pour 1 personne : 200/4 = 50g. Pour 10 personnes : 50 x 10 = 500g." },
                    { q: "Un coureur fait 400m en 1 minute. Quelle distance en 10 minutes ?", options: ["4 km", "4000 cm", "400 m", "1 km"], good: 0, info: "400 x 10 = 4 000 m = 4 km." },
                    { q: "Une bo√Æte contient 12 ≈ìufs. J'ai 60 ≈ìufs, combien de bo√Ætes ?", options: ["4", "5", "6", "10"], good: 1, info: "12 x 5 = 60." },
                    { q: "L√©o a 15 billes. Il en a 3 fois plus que Julie. Combien Julie en a-t-elle ?", options: ["45", "18", "5", "12"], good: 2, info: "Julie en a moins. 15 divis√© par 3 = 5." },
                    { q: "Un film dure 120 minutes. √Ä quelle heure finit-il s'il commence √† 20h ?", options: ["21h20", "22h", "22h20", "21h"], good: 1, info: "120 min = 2 heures. 20h + 2h = 22h." },
                    { q: "Somme des angles d'un triangle (Expert) :", options: ["90¬∞", "180¬∞", "360¬∞", "100¬∞"], good: 1, info: "C'est une r√®gle d'or en g√©om√©trie : la somme fait toujours 180¬∞." }
                ]
            }
        };

        function App() {
            const [view, setView] = useState('menu'); 
            const [category, setCategory] = useState(null);
            const [qIndex, setQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [answered, setAnswered] = useState(false);
            const [selected, setSelected] = useState(null);

            const startQuiz = (catKey) => {
                const cat = QUIZ_DATA[catKey];
                if (!cat) return;
                setCategory(cat);
                setQIndex(0);
                setScore(0);
                setAnswered(false);
                setSelected(null);
                setView('quiz');
            };

            const handleAnswer = (idx) => {
                if (answered || !category) return;
                setSelected(idx);
                setAnswered(true);
                if (idx === category.questions[qIndex].good) {
                    setScore(s => s + 1);
                }
            };

            const nextQuestion = () => {
                if (!category) return;
                const nextIdx = qIndex + 1;
                if (nextIdx < category.questions.length) {
                    setQIndex(nextIdx);
                    setAnswered(false);
                    setSelected(null);
                } else {
                    setView('result');
                }
            };

            const renderHomeButton = () => (
                <a href="index.html" className="home-btn" title="Retour √† l'accueil">üè†</a>
            );

            if (view === 'menu') {
                return (
                    <div className="min-h-screen p-6 max-w-5xl mx-auto flex flex-col items-center">
                        {renderHomeButton()}

                        <header className="text-center mb-10 fade-in mt-12 sm:mt-0">
                            <h1 className="text-4xl font-extrabold text-slate-800 mb-2">Ma√Ætre des Maths</h1>
                            <p className="text-slate-500 font-medium">Rel√®ve le d√©fi Expert du programme CM1 !</p>
                        </header>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full fade-in">
                            {Object.values(QUIZ_DATA).map((cat) => {
                                const colors = COLOR_MAP[cat.color] || COLOR_MAP.indigo;
                                return (
                                    <button 
                                        key={cat.id}
                                        onClick={() => startQuiz(cat.id)}
                                        className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200 hover:shadow-xl hover:-translate-y-1 transition-all group flex flex-col items-center text-center"
                                    >
                                        <div className={`w-16 h-16 rounded-2xl mb-4 flex items-center justify-center ${colors.light} ${colors.text} group-hover:scale-110 transition-transform`}>
                                            <Icon name={cat.icon} className="w-8 h-8" />
                                        </div>
                                        <h3 className="text-lg font-bold text-slate-800">{cat.title}</h3>
                                        <p className="text-xs font-bold text-slate-400 mt-2 uppercase tracking-widest">10 Questions Expert</p>
                                    </button>
                                );
                            })}
                        </div>
                    </div>
                );
            }

            if (view === 'quiz' && category) {
                const question = category.questions[qIndex];
                const colors = COLOR_MAP[category.color] || COLOR_MAP.indigo;

                return (
                    <div className="min-h-screen p-4 flex items-center justify-center bg-slate-50">
                        {renderHomeButton()}
                        <div className="w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100 flex flex-col fade-in">
                            
                            <div className="bg-slate-800 p-4 flex justify-between items-center text-white">
                                <button onClick={() => setView('menu')} title="Retour au menu principal" className="text-slate-400 hover:text-white transition-colors">
                                    <Icon name="home" className="w-5 h-5" />
                                </button>
                                <span className="font-bold text-sm tracking-widest uppercase">{category.title}</span>
                                <span className="font-mono bg-slate-700 px-3 py-1 rounded-full text-xs">{qIndex + 1} / {category.questions.length}</span>
                            </div>
                            
                            <div className="h-1.5 bg-slate-100 w-full">
                                <div 
                                    className={`h-full ${colors.bg} transition-all duration-500`} 
                                    style={{ width: `${((qIndex + 1) / category.questions.length) * 100}%` }}
                                ></div>
                            </div>

                            <div className="p-8">
                                <h2 className="text-xl md:text-2xl font-bold text-slate-800 mb-8 leading-tight">
                                    {question.q}
                                </h2>

                                <div className="space-y-3">
                                    {question.options.map((opt, idx) => {
                                        let style = "w-full text-left p-4 rounded-2xl border-2 transition-all flex items-center justify-between ";
                                        if (answered) {
                                            if (idx === question.good) style += "bg-green-50 border-green-500 text-green-800 font-bold correct-anim";
                                            else if (selected === idx) style += "bg-red-50 border-red-500 text-red-800 opacity-60";
                                            else style += "bg-slate-50 border-slate-100 text-slate-300";
                                        } else {
                                            style += "bg-white border-slate-200 hover:border-blue-400 hover:bg-blue-50 text-slate-700 active:scale-[0.98]";
                                        }

                                        return (
                                            <button key={idx} onClick={() => handleAnswer(idx)} disabled={answered} className={style}>
                                                <span>{opt}</span>
                                                {answered && idx === question.good && <Icon name="check-circle" className="text-green-500 w-5 h-5" />}
                                                {answered && selected === idx && idx !== question.good && <Icon name="x-circle" className="text-red-500 w-5 h-5" />}
                                            </button>
                                        );
                                    })}
                                </div>

                                {answered && (
                                    <div className="mt-8 fade-in">
                                        <div className={`p-5 rounded-2xl border-l-4 ${selected === question.good ? 'bg-green-50 border-green-500' : 'bg-orange-50 border-orange-500'}`}>
                                            <h4 className="font-bold text-slate-800 flex items-center gap-2 mb-1">
                                                <Icon name="book-open" className="w-4 h-4" /> Solution & Astuce
                                            </h4>
                                            <p className="text-sm text-slate-600 leading-relaxed">{question.info}</p>
                                        </div>
                                        <button onClick={nextQuestion} className="mt-6 w-full py-4 rounded-2xl bg-slate-900 text-white font-bold flex items-center justify-center gap-2 hover:bg-black transition-all shadow-lg">
                                            {qIndex < category.questions.length - 1 ? "Question suivante" : "Voir mon r√©sultat"}
                                            <Icon name="chevron-right" className="w-5 h-5" />
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (view === 'result') {
                const getStatus = () => {
                    if (score === 10) return { t: "G√©nie des Maths !", s: "Tu as r√©solu tous les probl√®mes sans erreur !", c: "emerald" };
                    if (score >= 8) return { t: "Excellent !", s: "Ton raisonnement est tr√®s solide.", c: "indigo" };
                    if (score >= 5) return { t: "Bien jou√© !", s: "Tu as de bonnes bases math√©matiques.", c: "amber" };
                    return { t: "Continue de t'entra√Æner", s: "Les maths demandent de la pratique quotidienne !", c: "red" };
                };
                const status = getStatus();
                const colors = COLOR_MAP[status.c] || COLOR_MAP.slate;

                return (
                    <div className="min-h-screen p-4 flex items-center justify-center">
                        {renderHomeButton()}
                        <div className="max-w-md w-full bg-white rounded-3xl shadow-2xl p-8 text-center border border-slate-100 fade-in">
                            <div className={`w-24 h-24 rounded-full mx-auto mb-6 flex items-center justify-center ${colors.light} ${colors.text}`}>
                                <Icon name="trophy" className="w-12 h-12" />
                            </div>
                            <h2 className="text-3xl font-black text-slate-800 mb-2">{status.t}</h2>
                            <p className="text-slate-500 mb-8">{status.s}</p>
                            
                            <div className="bg-slate-50 rounded-2xl p-6 mb-8">
                                <p className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Score Final</p>
                                <div className="text-5xl font-black text-slate-800">{score} <span className="text-2xl text-slate-300">/ 10</span></div>
                            </div>

                            <div className="grid grid-cols-1 gap-3 mb-4">
                                <button onClick={() => startQuiz(category.id)} className="w-full py-4 px-6 rounded-2xl bg-blue-600 text-white font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center justify-center gap-2">
                                    <Icon name="refresh-cw" className="w-5 h-5" /> Rejouer ce th√®me
                                </button>
                            </div>

                            <div className="flex gap-3">
                                <button onClick={() => setView('menu')} className="flex-1 py-4 px-6 rounded-2xl bg-slate-100 text-slate-700 font-bold hover:bg-slate-200 transition-colors flex items-center justify-center gap-2">
                                    Menu Quiz
                                </button>
                                <a href="index.html" className="flex-1 py-4 px-6 rounded-2xl bg-slate-900 text-white font-bold hover:bg-black transition-colors flex items-center justify-center gap-2">
                                    Accueil
                                </a>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
